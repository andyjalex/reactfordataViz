{"ast":null,"code":"var _jsxFileName = \"/Users/andyalexander/Documents/d3/React/reactfordataviz/src/components/Table.js\";\nimport React, { Component } from 'react';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Form from 'react-bootstrap/Form';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Table extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: []\n    };\n  }\n\n  componentDidMount() {\n    this.wrangleData();\n  }\n\n  wrangleData() {\n    console.log(this.props.data); //simplify to an array\n\n    var breedArray = this.props.breed.map(obj => {\n      return obj.value;\n    });\n    var data = this.props.data;\n    data.forEach(d => {\n      d.year = d.Month.substr(0, 4);\n      d.month = d.Month.substr(5, 2);\n      d.west = Number(d.West_Highland_White_Terrier);\n      d.retriever = Number(d.Golden_Retriever);\n      d.labrador = Number(d.Labrador_Retriever);\n      d.dalmatian = Number(d.Dalmatian);\n      d.cockapoo = Number(d.Cockapoo); // d.labrador = Number(d.Labrador)\n    });\n    data.forEach(d => {\n      d.NewDate = new Date(d.year, d.month, '01');\n    }); // unpivot the data\n\n    var newArray = [];\n    data.forEach(d => {\n      //needs to be refactored to be dynamic\n      //loop for var numOfDogs\n      newArray.push({\n        Date: d.NewDate,\n        Breed: 'West Highland Terrier',\n        Score: d.west\n      });\n      newArray.push({\n        Date: d.NewDate,\n        Breed: 'Retriever',\n        Score: d.retriever\n      });\n      newArray.push({\n        Date: d.NewDate,\n        Breed: 'Labrador',\n        Score: d.labrador\n      });\n      newArray.push({\n        Date: d.NewDate,\n        Breed: 'Dalmatian',\n        Score: d.dalmatian\n      });\n      newArray.push({\n        Date: d.NewDate,\n        Breed: 'Cockapoo',\n        Score: d.cockapoo\n      });\n    });\n    const newData = newArray.filter(item => breedArray.includes(item.Breed));\n    newData.forEach(d => {\n      if (d.Score !== d.Score) {\n        d.Score = 0;\n      }\n    });\n    console.log(newData);\n    var table = this.coll2tbl(newData, 'Date', 'Breed', 'Score');\n    console.log(table);\n  }\n\n  get_prop(obj, prop) {\n    return prop.split('.').reduce((o, k) => obj[k], obj);\n  }\n\n  coll2tbl(coll, row_header, col_header, cell) {\n    var table = {};\n    var row_headers = [];\n    var cols = {};\n    coll.forEach(a => {\n      var h = this.get_prop(a, row_header);\n\n      if (h in table === false) {\n        table[h] = {};\n        row_headers.push(h);\n      }\n\n      var c = this.get_prop(a, col_header);\n      cols[c] = null;\n      table[h][c] = get_prop(a, cell);\n    });\n    var cells = [];\n\n    for (var row in table) cells.push(Object.values(table[row]));\n\n    return {\n      row_headers,\n      col_headers: Object.keys(cols),\n      cells\n    };\n  }\n\n  renderCols() {\n    return this.props.data.columns.map(function (item, i) {\n      return /*#__PURE__*/_jsxDEV(Col, {\n        md: 2,\n        xs: 3,\n        children: item\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Row, {\n      children: this.renderCols()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/andyalexander/Documents/d3/React/reactfordataviz/src/components/Table.js"],"names":["React","Component","Row","Col","Form","Table","constructor","props","state","data","componentDidMount","wrangleData","console","log","breedArray","breed","map","obj","value","forEach","d","year","Month","substr","month","west","Number","West_Highland_White_Terrier","retriever","Golden_Retriever","labrador","Labrador_Retriever","dalmatian","Dalmatian","cockapoo","Cockapoo","NewDate","Date","newArray","push","Breed","Score","newData","filter","item","includes","table","coll2tbl","get_prop","prop","split","reduce","o","k","coll","row_header","col_header","cell","row_headers","cols","a","h","c","cells","row","Object","values","col_headers","keys","renderCols","columns","i","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Form from 'react-bootstrap/Form';\n\nexport default class Table extends Component {\n\n  state = {\n    data: []\n  }\n\n  constructor(props) {\n    super(props)\n  }\n\n  componentDidMount() {\n\n    this.wrangleData()\n  }\n\n  wrangleData() {\n    console.log(this.props.data)\n\n    //simplify to an array\n    var breedArray = this.props.breed.map((obj) => {\n      return obj.value\n    })\n\n    var data = this.props.data\n\n    data.forEach(d => {\n\t    d.year = d.Month.substr(0,4)\n\t\t\td.month = d.Month.substr(5,2)\n\t\t\td.west = Number(d.West_Highland_White_Terrier)\n\t\t\td.retriever = Number(d.Golden_Retriever)\n\t\t\td.labrador = Number(d.Labrador_Retriever)\n\t\t\td.dalmatian = Number(d.Dalmatian)\n\t\t\td.cockapoo = Number(d.Cockapoo)\n\t\t\t// d.labrador = Number(d.Labrador)\n\t  })\n\t\tdata.forEach(d => {\n\t\t\td.NewDate = new Date(d.year, d.month, '01')\n\t\t})\n\n\t\t// unpivot the data\n\t\tvar newArray = []\n\t\tdata.forEach(d => {\n\t\t\t//needs to be refactored to be dynamic\n\t\t\t//loop for var numOfDogs\n\t\t\tnewArray.push({Date: d.NewDate, Breed: 'West Highland Terrier', Score: d.west})\n\t\t\tnewArray.push({Date: d.NewDate, Breed: 'Retriever', Score: d.retriever})\n\t\t\tnewArray.push({Date: d.NewDate, Breed: 'Labrador', Score: d.labrador})\n\t\t\tnewArray.push({Date: d.NewDate, Breed: 'Dalmatian', Score: d.dalmatian})\n\t\t\tnewArray.push({Date: d.NewDate, Breed: 'Cockapoo', Score: d.cockapoo})\n\t\t})\n\n\t\tconst newData = newArray.filter(item => breedArray.includes(item.Breed))\n\n\t\tnewData.forEach(d => {\n\t\t\tif(d.Score !== d.Score){\n    \t\td.Score = 0;\n\t\t\t}\n\t\t});\n\n    console.log(newData)\n\n    var table = this.coll2tbl(newData, 'Date', 'Breed', 'Score');\n    console.log(table);\n\n  }\n\n  get_prop(obj, prop) {\n      return prop.split('.').reduce((o,k) => obj[k], obj);\n  }\n\n\n  coll2tbl(coll, row_header, col_header, cell) {\n    var table = {};\n    var row_headers = [];\n    var cols = {};\n\n    coll.forEach(a => {\n        var h = this.get_prop(a, row_header);\n        if (h in table === false) {\n            table[h] = {};\n            row_headers.push(h);\n        }\n        var c = this.get_prop(a, col_header);\n        cols[c] = null;\n        table[h][c] = get_prop(a, cell);\n    });\n\n    var cells = [];\n    for (var row in table)\n        cells.push(Object.values(table[row]));\n\n    return { row_headers, col_headers: Object.keys(cols), cells };\n}\n\n  renderCols() {\n    return (\n    this.props.data.columns.map(function (item, i) {\n      return(\n        <Col md={2} xs={3}>{item}</Col>\n      )\n    })\n    )\n\n\n  }\n\n  render() {\n    return(\n        <Row>\n          {this.renderCols()}\n        </Row>\n    )\n  }\n\n}\n"]},"metadata":{},"sourceType":"module"}