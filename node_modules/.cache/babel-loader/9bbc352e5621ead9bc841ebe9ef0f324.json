{"ast":null,"code":"var _jsxFileName = \"/Users/andyalexander/Documents/d3/React/reactfordataviz/src/components/Table.js\";\nimport React, { Component } from 'react';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Form from 'react-bootstrap/Form';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Table extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: []\n    };\n\n    this.renderCells = () => {\n      return;\n      this.state.data.cells.map(cell => {\n        /*#__PURE__*/\n        _jsxDEV(Col, {\n          md: 2,\n          xs: 3,\n          children: cell\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 39\n        }, this);\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.wrangleData(this.props.data, this.props.breed);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this.wrangleData(nextProps.data, nextProps.breed);\n  }\n\n  wrangleData(data, breed) {\n    //simplify to an array\n    var breedArray = breed.map(obj => {\n      return obj.value;\n    });\n    data.forEach(d => {\n      d.year = d.Month.substr(0, 4);\n      d.month = d.Month.substr(5, 2);\n      d.west = Number(d.West_Highland_White_Terrier);\n      d.retriever = Number(d.Golden_Retriever);\n      d.labrador = Number(d.Labrador_Retriever);\n      d.dalmatian = Number(d.Dalmatian);\n      d.cockapoo = Number(d.Cockapoo); // d.labrador = Number(d.Labrador)\n    });\n    data.forEach(d => {\n      d.NewDate = d.year + d.month + '01';\n    }); // unpivot the data\n\n    var newArray = [];\n    data.forEach(d => {\n      //needs to be refactored to be dynamic\n      //loop for var numOfDogs\n      newArray.push({\n        Date: d.NewDate,\n        Breed: 'West Highland Terrier',\n        Score: d.west\n      });\n      newArray.push({\n        Date: d.NewDate,\n        Breed: 'Retriever',\n        Score: d.retriever\n      });\n      newArray.push({\n        Date: d.NewDate,\n        Breed: 'Labrador',\n        Score: d.labrador\n      });\n      newArray.push({\n        Date: d.NewDate,\n        Breed: 'Dalmatian',\n        Score: d.dalmatian\n      });\n      newArray.push({\n        Date: d.NewDate,\n        Breed: 'Cockapoo',\n        Score: d.cockapoo\n      });\n    });\n    const newData = newArray.filter(item => breedArray.includes(item.Breed));\n    newData.forEach(d => {\n      if (d.Score !== d.Score) {\n        d.Score = 0;\n      }\n    });\n    var table = this.coll2tbl(newData, 'Date', 'Breed', 'Score');\n    console.log(table);\n    this.setState({\n      data: table\n    });\n  }\n\n  get_prop(obj, prop) {\n    return prop.split('.').reduce((o, k) => obj[k], obj);\n  }\n\n  coll2tbl(coll, row_header, col_header, cell) {\n    var table = {};\n    var row_headers = [];\n    var cols = {};\n    coll.forEach(a => {\n      var h = this.get_prop(a, row_header);\n\n      if (h in table === false) {\n        table[h] = {};\n        row_headers.push(h);\n      }\n\n      var c = this.get_prop(a, col_header);\n      cols[c] = null;\n      table[h][c] = this.get_prop(a, cell);\n    });\n    var cells = [];\n\n    for (var row in table) cells.push(Object.values(table[row]));\n\n    return {\n      row_headers,\n      col_headers: Object.keys(cols),\n      cells\n    };\n  }\n\n  renderCols() {\n    return this.state.data.col_headers.map(function (item, i) {\n      return /*#__PURE__*/_jsxDEV(Col, {\n        md: 2,\n        xs: 3,\n        children: item\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this);\n    });\n  }\n\n  renderRows() {\n    console.log(this.state.data.row_headers);\n    console.log(this.state.data.cells[0]);\n    var cells = this.state.data.cells; // var headers = this.state.data.row_headers\n\n    console.log(cells[0]);\n    return this.state.data.row_headers.map(function (item, i) {\n      return /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: 2,\n          xs: 3,\n          children: i\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 16\n        }, this), this.renderCells(i)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this);\n    });\n  }\n\n  render() {\n    if (this.state.data == 0) {\n      return \"No data yet\";\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: 2,\n          xs: 3,\n          children: \"Month\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this), this.renderCols()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), this.renderRows()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/andyalexander/Documents/d3/React/reactfordataviz/src/components/Table.js"],"names":["React","Component","Row","Col","Form","Table","constructor","props","state","data","renderCells","cells","map","cell","componentDidMount","wrangleData","breed","UNSAFE_componentWillReceiveProps","nextProps","breedArray","obj","value","forEach","d","year","Month","substr","month","west","Number","West_Highland_White_Terrier","retriever","Golden_Retriever","labrador","Labrador_Retriever","dalmatian","Dalmatian","cockapoo","Cockapoo","NewDate","newArray","push","Date","Breed","Score","newData","filter","item","includes","table","coll2tbl","console","log","setState","get_prop","prop","split","reduce","o","k","coll","row_header","col_header","row_headers","cols","a","h","c","row","Object","values","col_headers","keys","renderCols","i","renderRows","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Form from 'react-bootstrap/Form';\n\nexport default class Table extends Component {\n\n  state = {\n    data: []\n  }\n\n  constructor(props) {\n    super(props)\n  }\n\n  componentDidMount() {\n\n    this.wrangleData(this.props.data, this.props.breed)\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    this.wrangleData(nextProps.data, nextProps.breed)\n  }\n\n  wrangleData(data, breed) {\n\n    //simplify to an array\n    var breedArray = breed.map((obj) => {\n      return obj.value\n    })\n\n    data.forEach(d => {\n\t    d.year = d.Month.substr(0,4)\n\t\t\td.month = d.Month.substr(5,2)\n\t\t\td.west = Number(d.West_Highland_White_Terrier)\n\t\t\td.retriever = Number(d.Golden_Retriever)\n\t\t\td.labrador = Number(d.Labrador_Retriever)\n\t\t\td.dalmatian = Number(d.Dalmatian)\n\t\t\td.cockapoo = Number(d.Cockapoo)\n\t\t\t// d.labrador = Number(d.Labrador)\n\t  })\n\t\tdata.forEach(d => {\n\t\t\td.NewDate = d.year+d.month+'01'\n    })\n\n\t\t// unpivot the data\n\t\tvar newArray = []\n\t\tdata.forEach(d => {\n\t\t\t//needs to be refactored to be dynamic\n\t\t\t//loop for var numOfDogs\n\t\t\tnewArray.push({Date: d.NewDate, Breed: 'West Highland Terrier', Score: d.west})\n\t\t\tnewArray.push({Date: d.NewDate, Breed: 'Retriever', Score: d.retriever})\n\t\t\tnewArray.push({Date: d.NewDate, Breed: 'Labrador', Score: d.labrador})\n\t\t\tnewArray.push({Date: d.NewDate, Breed: 'Dalmatian', Score: d.dalmatian})\n\t\t\tnewArray.push({Date: d.NewDate, Breed: 'Cockapoo', Score: d.cockapoo})\n\t\t})\n\n\t\tconst newData = newArray.filter(item => breedArray.includes(item.Breed))\n\n\t\tnewData.forEach(d => {\n\t\t\tif(d.Score !== d.Score){\n    \t\td.Score = 0;\n\t\t\t}\n\t\t});\n\n    var table = this.coll2tbl(newData, 'Date', 'Breed', 'Score');\n    console.log(table);\n\n    this.setState({data: table })\n\n  }\n\n  get_prop(obj, prop) {\n      return prop.split('.').reduce((o,k) => obj[k], obj);\n  }\n\n\n  coll2tbl(coll, row_header, col_header, cell) {\n    var table = {};\n    var row_headers = [];\n    var cols = {};\n\n    coll.forEach(a => {\n        var h = this.get_prop(a, row_header);\n        if (h in table === false) {\n            table[h] = {};\n            row_headers.push(h);\n        }\n        var c = this.get_prop(a, col_header);\n        cols[c] = null;\n        table[h][c] = this.get_prop(a, cell);\n    });\n\n    var cells = [];\n    for (var row in table)\n        cells.push(Object.values(table[row]));\n\n    return { row_headers, col_headers: Object.keys(cols), cells };\n}\n\n  renderCols() {\n    return (\n    this.state.data.col_headers.map(function (item, i) {\n      return(\n        <Col md={2} xs={3}>{item}</Col>\n      )\n    })\n    )\n  }\n\n  renderCells = () => {\n    return\n    this.state.data.cells.map(cell =>{<Col md={2} xs={3}>{cell}</Col>})\n  }\n\n\n  renderRows() {\n    console.log(this.state.data.row_headers)\n    console.log(this.state.data.cells[0])\n   var cells = this.state.data.cells\n    // var headers = this.state.data.row_headers\n    console.log(cells[0])\n    return (\n      this.state.data.row_headers.map(function (item, i) {\n        return(\n          <Row><Col md={2} xs={3}>{i}</Col>{this.renderCells(i)}</Row>\n        )\n      })\n\n    )\n\n\n  }\n\n\n  render() {\n\n    if (this.state.data == 0) {\n      return \"No data yet\"\n    }\n\n    return(\n      <div>\n        <Row>\n          <Col md={2} xs={3}>Month</Col>\n          {this.renderCols()}\n        </Row>\n        {this.renderRows()}\n\n      </div>\n    )\n  }\n\n}\n"]},"metadata":{},"sourceType":"module"}